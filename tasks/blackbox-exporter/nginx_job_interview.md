## Как вы использовали Nginx на практике, для каких команд устанавливали и какие кейсы с ним были?

---

### 1. **Как Nginx использовался в вашей работе?**

**Пример ответа:**
"Nginx использовался для решения множества задач: от обслуживания статического контента до балансировки нагрузки и работы в качестве обратного прокси. Мы настраивали его для раздачи файлов, перенаправления запросов к приложениям, защиты от DDoS-атак и кэширования ответов. Эти конфигурации позволяли нам обеспечивать высокую производительность, отказоустойчивость и безопасность наших сервисов."

---

### 2. **Какие команды вы использовали для работы с Nginx?**

#### Установка Nginx:
```bash
sudo apt update
sudo apt install nginx -y
```
**Я устанавливал Nginx через пакетный менеджер (например, `apt` для Ubuntu). После установки проверял его работу с помощью команд:**

```bash
sudo systemctl start nginx
sudo systemctl enable nginx
```

#### Проверка конфигурации:
```bash
sudo nginx -t
```
**Для проверки корректности конфигурации я использовал команду `nginx -t`. Она помогала выявить ошибки перед перезапуском сервера.**

#### Перезапуск Nginx:
```bash
sudo systemctl reload nginx
```
**После внесения изменений в конфигурацию я перезагружал Nginx с помощью `systemctl reload nginx`, чтобы применить изменения без простоя.**

#### Просмотр логов:
```bash
tail -f /var/log/nginx/error.log
tail -f /var/log/nginx/access.log
```
**Для диагностики проблем я анализировал логи доступа (`access.log`) и ошибок (`error.log`).**

---

### 3. **Кому вы устанавливали Nginx?**

**Пример ответа:**
"Я устанавливал Nginx на:

- **Серверы приложений**: для работы в качестве обратного прокси или балансировщика нагрузки.
- **Веб-серверы**: для раздачи статического контента и обслуживания сайтов.
- **Команды DevOps/SRE**: для настройки отказоустойчивости и мониторинга.
- **Команды разработчиков**: для тестирования и интеграции их приложений с Nginx."

---

### 4. **Какие каверзные вопросы могут возникнуть и как на них ответить?**

#### Вопрос: Как вы решали проблемы с производительностью Nginx?
**Ответ:**
"Если возникали проблемы с производительностью, я:

1. Оптимизировал параметры Nginx, такие как `worker_processes`, `worker_connections` и `multi_accept`.
2. Включал gzip-сжатие и кэширование для уменьшения времени загрузки.
3. Анализировал логи и метрики (например, количество активных подключений) для выявления узких мест."

#### Вопрос: Как вы обеспечивали безопасность Nginx?
**Ответ:**
"Я:

1. Настроил HTTPS с использованием Let's Encrypt для шифрования трафика.
2. Ограничивал доступ к чувствительным эндпоинтам через `allow`/`deny` или basic auth.
3. Защищал от DDoS-атак с помощью модулей `limit_req` и `limit_conn`."

#### Вопрос: Как вы решали проблему с большим количеством подключений?
**Ответ:**
"Если количество подключений было слишком большим, я:

1. Увеличивал лимиты на подключения (`worker_connections`).
2. Настраивал таймауты (`keepalive_timeout`, `client_body_timeout`) для освобождения ресурсов.
3. Использовал upstream-пулы для распределения нагрузки между несколькими серверами."

#### Вопрос: Как вы настраивали мониторинг Nginx?
**Ответ:**
"Я добавлял модуль `stub_status` для сбора базовой статистики и интегрировал Nginx Exporter с Prometheus для детального мониторинга. Также создавал дашборды в Grafana для визуализации метрик."

---

### 5. **Пример успешного кейса использования Nginx**

**Пример ответа:**
"Однажды мы столкнулись с проблемой высокой нагрузки на наш веб-сервер из-за большого количества одновременных подключений. С помощью Nginx мы настроили балансировку нагрузки между несколькими серверами приложений. Мы также включили кэширование и gzip-сжатие, что позволило значительно уменьшить нагрузку на бэкенд и время отклика для пользователей."

---

### 6. **Что ещё можно добавить?**

#### Интеграция с Prometheus и Grafana:
"Мы интегрировали Nginx с Prometheus через Nginx Exporter для сбора метрик и с Grafana для визуализации. Это позволило нам создавать информативные дашборды с данными о производительности серверов Nginx."

#### Автоматизация установки:
"Для масштабирования я написал Ansible playbook для автоматической установки и настройки Nginx. Это упростило развертывание на нескольких серверах."

#### Мониторинг бизнес-метрик:
"Мы использовали Nginx для мониторинга ключевых бизнес-метрик, таких как количество HTTP-ошибок (например, 4xx и 5xx статусы) и среднее время обработки запросов."

#### Защита от DDoS-атак:
"Мы настраивали Nginx для защиты от DDoS-атак с помощью ограничения скорости запросов (`limit_req`) и блокировки подозрительных IP-адресов через `deny`."

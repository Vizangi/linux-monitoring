# VirtualBox

## Tasks

### Почему мы выбрали **Debian**
  - Мы выбрали образ [Debian](https://ru.wikipedia.org/wiki/Debian "Debian ([ˈdɛbiən]) — операционная система, состоящая из свободного ПО с открытым исходным кодом. В настоящее время Debian GNU/Linux — один из самых популярных и важных дистрибутивов GNU/Linux, в первичной форме оказавший значительное влияние на развитие этого типа ОС в целом. Также существует проект на основе другого ядра: Debian GNU/Hurd. Debian может использоваться в качестве операционной системы как для серверов, так и для рабочих станций."), потому что у него пакетный менеджер такой же как в [Ubuntu](https://ru.wikipedia.org/wiki/Ubuntu "Ubuntu (МФА [ʊˈbʊntuː]; от зулу ubuntu — «человечность»; «Убу́нту») — дистрибутив GNU/Linux, основанный на Debian GNU/Linux. Основным разработчиком и спонсором является компания Canonical. В настоящее время проект активно развивается и поддерживается свободным сообществом.") + хороший установочник, который позволяет установить систему без GUI, а это значит: большое сообщество в интернете и можно найти ответ почти на любой вопрос, я уже молчу про Qwen и ChatGPT
  - Системные требования очень низкие, после запуска нагрузка на RAM не превышает = `270Мб`

---

### Установка VirtualBox. Часть 0

- Скачайте последнюю версию [VirtualBox](https://ru.wikipedia.org/wiki/VirtualBox "VirtualBox (Oracle VM VirtualBox) — программный продукт виртуализации для операционных систем Windows, Linux, FreeBSD, macOS, Solaris/OpenSolaris, ReactOS, DOS и других.") с официального сайта
- Установите VirtualBox

---

### Установка Debian. Часть 1

- Для установки берем чистый образ [Debian Netinst 12.9.0 (amd64)](https://www.debian.org/CD/netinst/ "Это один компакт-диск, который содержит только самое необходимое программное обеспечение для того, чтобы установить базовую систему и загрузить все остальные пакеты по сети.") и ставим без [Desktop Environment (DE)](https://ru.wikipedia.org/wiki/%D0%A1%D1%80%D0%B5%D0%B4%D0%B0_%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B5%D0%B3%D0%BE_%D1%81%D1%82%D0%BE%D0%BB%D0%B0 "Среда рабочего стола (СРС, англ. desktop environment) — разновидность графических интерфейсов пользователя, основанная на метафоре рабочего стола.")
- Для **VirtualBox** выбираем следующие параметры:
  - **RAM**: `1024Mb`
  - **HDD**: `10Gb`
  - **CPU**: `2 Cores`
- Далее при установке выбираем: установка через [GUI](https://ru.wikipedia.org/wiki/%D0%93%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F "Графический интерфейс пользователя сокр. ГИП (от англ. Graphical User Interface (GUI)), также графическая оболочка, — это способ взаимодействия пользователя с компьютером с использованием графических элементов, таких как окна, кнопки и меню.")
- Выбираем обязательно английский язык
- Вписываем имя хоста (виртуалки)
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%200.0.1.png" alt="Выбрать следующие пункты" width="550">
- Доменное имя оставляем пустым
- Вписываем пароль `Root`
- Вписываем имя пользователя
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%200.1.png" alt="Выбрать следующие пункты" width="550">
- Вписываем пароль `User` (можно сделать таким же, как и Root, так как по сути вы: и админ, и юзер, и root в одном лице и будете крутить виртуалки в тестовом режиме, но по факту же такие пароли надо вводить разными для безопасности)
- Выбираем `Guided - use entire disk:` Автоматическое использование всего диска без дополнительной конфигурации
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%200.2.png" alt="Выбрать следующие пункты" width="550">
- Это этап, на котором система просит вас выбрать диск, который будет использоваться для установки операционной системы
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%201.png" alt="Выбрать следующие пункты" width="550">
- Выбираем `All files in one partition (recommended for new users):` Все файлы будут находиться в одном разделе
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%202.png" alt="Выбрать следующие пункты" width="550">
- Записываем изменения на диск
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%203.png" alt="Выбрать следующие пункты" width="550">
- Форматируем разделы
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%203.1.png" alt="Выбрать следующие пункты" width="550">
- Оставляем дефолтный пакетный менеджер [apt](https://ru.wikipedia.org/wiki/Advanced_Packaging_Tool "apt (advanced packaging tool) — программа для установки, обновления и удаления программных пакетов в операционных системах Debian и основанных на них дистрибутивах (например: Ubuntu, Linux Mint и т. п.), иногда также используется в дистрибутивах, основанных на Mandrake, например Mandriva, ALT Linux и PCLinuxOS. Способна автоматически устанавливать и настраивать программы для UNIX-подобных операционных систем как из предварительно откомпилированных пакетов, так и из исходных кодов.")
- При конфигурации менеджера выбираем `Debian archive mirror country:` Russian Federation
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%204.png" alt="Выбрать следующие пункты" width="550">
- Отказываемся от участия в сборе анонимной статистики
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20install%205.png" alt="Выбрать следующие пункты" width="550">
- В дальнейшем нужно будет снять все галочки и поставить, как на скрине ниже (нас интересует чистый терминальный Debian)
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20Install%206.jpg" alt="Выбрать следующие пункты" width="550"> 
- Выбираем для GRUB загрузчика - YES
- Здесь система предлагает вам выбрать устройство, на которое будет установлен загрузчик [GRUB](https://ru.wikipedia.org/wiki/GNU_GRUB "GRUB (англ. GRand Unified Bootloader) — загрузчик операционной системы от проекта GNU. GRUB позволяет пользователю иметь несколько установленных операционных систем и при включении компьютера выбирать одну из них для загрузки.") (нас интересует наш диск)
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Debian%20install%207.png" alt="Выбрать следующие пункты" width="550"> 

---

- После первого запуска машины нужно установить пакет `sudo`
      
```bash
su -  # Переключитесь на пользователя root
apt update  # Обновите список пакетов
apt install sudo  # Установите пакет sudo
```

- Далее используйте команду `sudo nano /etc/sudoers` и добавьте в самый конец файла строку с вашим именем пользователя
  
```bash
user_name  ALL=(ALL:ALL) ALL
```

- Сохраните изменения
- Далее установите зависимости

```bash
sudo apt install musl musl-tools
```

- Сохраните изменения
- Перезагрузите машину

- Далее [установите](https://github.com/lamjob1993/linux-monitoring/blob/main/linux_install/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%20%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2.md "В Debian и других дистрибутивах на основе Debian (например, Ubuntu) сетевые утилиты и программы обычно входят в состав различных пакетов.") дополнительные пакеты по ходу выполнения курса на ваш вкус с [необходимым ПО](https://github.com/lamjob1993/linux-monitoring/blob/main/linux_install/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA%20%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2.md "В Linux существует множество сетевых программ, которые помогают в диагностике, мониторинге, настройке и управлении сетевыми соединениями."): **curl**, **net-tools** - как минимум, а также прочие пакеты

---

### Клонирование Debian. Часть 2

- Выключаем виртуальную машину Debian
- Теперь заходим в сетевые настройки нашей виртуалки и ставим только бридж (мост)
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/VirtualBox%20(%D0%BA%D0%BB%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%202).png" alt="Выбрать следующие пункты" width="850"> 
- Клонируем 2 раза виртуальную машину Debian со следующими настройками и получаем 3 машины
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/VirtualBox%20(%D0%BA%D0%BB%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5).png" alt="Выбрать следующие пункты" width="850"> 
- Переименуйте их по порядку 1, 2, 3
- Запустите 3 виртуальные машины одновременно и войдите в профиль пользователя
  - Проверьте какие выдались IP адреса каждой машине и перепишите их в блокнот (должны выдаться разные IP из одной маски подсети)
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/2%20machines%20ip_a.png" alt="Выбрать следующие пункты" width="850"> 
- Сделайте ping трех машин друг до друга (слева на скриншоте указано два клона пингующих друг друга), сделайте пинг этих клонов с хостовой системы Windows (справа на скриншоте пинг двух клонов)
  - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/Ping%20All.png" alt="Выбрать следующие пункты" width="850"> 
- Во избежание ошибок с IP адресами в режиме моста (бридж), недоступности хостов по команде `ping` или недоступности интернета по пингу [DNS](https://ru.wikipedia.org/wiki/DNS "DNS (англ. Domain Name System «система доменных имён») — компьютерная распределённая система для получения информации о доменах. Чаще всего используется для получения IP-адреса по имени хоста (компьютера или устройства), получения информации о маршрутизации почты и/или обслуживающих узлах для протоколов в домене (SRV-запись)."): `ya.ru` - переустановите Debian еще раз по инструкции с полным удалением диска
  - Если проблема сохраняется - идите дальше с одной Debian машиной в режиме [NAT](https://ru.wikipedia.org/wiki/NAT "NAT (от англ. Network Address Translation — «преобразование сетевых адресов») — это механизм в сетях TCP/IP, позволяющий преобразовывать IP-адреса транзитных пакетов. Также имеет названия IP Masquerading, Network Masquerading и Native Address Translation.") и не задерживайтесь
    - Три Debian машины понадобятся при поднятии федерации и далее по репозиторию

---

### Установка MobaXterm. Часть 3

- [Скачайте крякнутую программу](https://rutracker.org/forum/viewtopic.php?t=6511089) для удаленного администрирования серверов <span title="MobaXterm — это расширенный терминал для Windows, который предоставляет множество инструментов для работы с удаленными системами и сетями. Он сочетает в себе функции терминала, SSH-клиента, инструментов для работы с сетью и многого другого, что делает его удобным решением для системных администраторов, разработчиков и IT-специалистов.">**MobaXterm**</span> с торрента
- Если не умеете лечить инсталлятор, то [возьмите демо-версию](https://mobaxterm.mobatek.net/) с официального сайта, она с ограничениями, но работает
- Запустите **Mobaxterm** и подключитесь к трем виртуалкам по SSH одновременно
- После подключения задействуйте мультиоконный (MultiExec) режим:
  - Одновременно на трех машинах запустятся три терминала
  - Одновременно исполните команду `top` и проверьте потребление RAM
  - На скриншоте одновременное исполнение команды `sudo systemctl status prometheus.service` на трех машинах сразу
    - <img src="https://github.com/lamjob1993/linux-monitoring/blob/main/.files/.bucket/MultiExec.png" alt="Выбрать следующие пункты" width="850">
- С данного этапа на ваши машины Debian вы будете заходить только из-под VirtualBox и только в фоновом режиме (клик правой кнопкой на запуск в фоне) и только через **MobaXterm**

--- 

### Установка Microsoft Visual Studio Code. Часть 4

- Скачайте и установите последнюю версию [Microsoft Visual Studio Code](https://code.visualstudio.com/ "Visual Studio Code (VS Code) — текстовый редактор, разработанный Microsoft для Windows, Linux и macOS. Позиционируется как «лёгкий» редактор кода для кроссплатформенной разработки веб- и облачных приложений. Включает в себя отладчик, инструменты для работы с Git, подсветку синтаксиса, IntelliSense и средства для рефакторинга. Имеет широкие возможности для кастомизации: пользовательские темы, сочетания клавиш и файлы конфигурации. Распространяется бесплатно, разрабатывается как программное обеспечение с открытым исходным кодом, но готовые сборки распространяются под проприетарной лицензией.")
- За время прохождения репозитория учимся пользоваться только Nano, чтобы набивать практику
- По репозиторию нам понадобится этот IDE, когда пойдут конфиги побольше
